(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{345:function(t,e,r){"use strict";r.d(e,"a",function(){return c});var n=r(347),o=r.n(n);o.a.apps.length||o.a.initializeApp({apiKey:"AIzaSyBT0ynr0e86xHRkHUK0iuFxrTOYqI_9Mqg",authDomain:"nuxt-6397b.firebaseapp.com",databaseURL:"https://nuxt-6397b.firebaseio.com",projectId:"nuxt-6397b",storageBucket:"nuxt-6397b.appspot.com",messagingSenderId:"533892599090"});var c=o.a.firestore();o.a},379:function(t,e,r){"use strict";r.r(e);var n=r(21),o=r(345),c=(r(347),{asyncData:function(){return o.a.collection("categoria").orderBy("nombre").get().then(function(t){var e=[];return t.forEach(function(t){e.push(Object(n.a)({id:t.id},t.data()))}),{bloquear:!1,perPage:10,currentPage:1,categorias:e}})},data:function(){return{show:!1,isBusy:!1,boxTwo:"",define:"",idEditar:"",tituloModal:"Editar categoria",form:{nombre:""},variable:!1,nameState:null,fields:[{key:"nombre"},{key:"acciones"}]}},computed:{rows:function(){return this.categorias.length}},methods:{eliminarCategorias:function(t,e){var r=this;1==confirm("DESEA REALMENTE ELIMINAR ESTA CATEGORIA?")&&o.a.collection("categoria").doc(t).delete().then(function(){r.categorias.map(function(e,r){e.id==t&&r}),r.categorias.splice(e,1)})},editarCategoria:function(t,e){var r=this;this.variable=!1,this.define="editar",this.idEditar=t,this.categorias.map(function(e,n){e.id==t&&(r.form={nombre:e.nombre})})},checkFormValidity:function(){var t=this.$refs.form.checkValidity();return this.nameState=t?"valid":"invalid",t},resetModal:function(){this.nameState=null},handleOk:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(){var t=this;this.checkFormValidity()&&(this.isBusy=!0,"editar"==this.define&&o.a.collection("categoria").doc(this.idEditar).set(this.form).then(function(e){o.a.collection("categoria").orderBy("nombre").get().then(function(e){t.categorias=[],e.forEach(function(e){t.categorias.push(Object(n.a)({id:e.id},e.data()))}),t.isBusy=!1})}),this.$nextTick(function(){t.$refs.modal.hide()}))}}}),l=r(16),component=Object(l.a)(c,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row mt-3"},[r("div",{staticClass:"col-sm-12"},[r("div",{staticClass:"row"},[t._m(0),t._v(" "),r("div",{staticClass:"col-sm-1"},[r("b-button",{attrs:{variant:"primary",href:"/categoria/crearCategoria"}},[t._v("Nueva")])],1)]),t._v(" "),r("b-table",{attrs:{striped:"",hover:"",id:"my-table",fields:t.fields,items:t.categorias,"per-page":t.perPage,"current-page":t.currentPage,busy:t.isBusy},scopedSlots:t._u([{key:"acciones",fn:function(data){return[r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.editar",modifiers:{editar:!0}}],attrs:{variant:"success",disabled:t.bloquear},on:{click:function(e){return t.editarCategoria(data.item.id,data.index)}}},[t._v("Editar")]),t._v(" "),r("b-button",{attrs:{variant:"danger",disabled:t.bloquear},on:{click:function(e){return t.eliminarCategorias(data.item.id,data.index)}}},[t._v("Eliminar")])]}}])},[r("div",{staticClass:"text-center my-2",attrs:{slot:"table-busy"},slot:"table-busy"},[r("b-spinner",{staticClass:"align-middle"}),t._v(" "),r("strong",[t._v("Cargando...")])],1)]),t._v(" "),r("b-modal",{ref:"modal",attrs:{"header-bg-variant":"dark","header-text-variant":"light",id:"editar",title:t.tituloModal},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleOk},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[r("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[r("b-form-group",{attrs:{state:t.nameState,label:"Nombre","label-for":"nombre","invalid-feedback":"Ingresa un nombre"}},[r("b-form-input",{attrs:{id:"nombre",state:t.nameState,required:""},model:{value:t.form.nombre,callback:function(e){t.$set(t.form,"nombre",e)},expression:"form.nombre"}},[t._v(t._s(t.form.nombre))])],1)],1),t._v(" "),r("div",{attrs:{slot:"modal-footer"},slot:"modal-footer"},[r("b-button",{attrs:{variant:"primary"},on:{click:t.handleOk}},[t._v("Guardar")]),t._v(" "),r("b-button",{attrs:{variant:"danger"},on:{click:function(e){t.show=!1}}},[t._v("Cancelar")])],1)]),t._v(" "),r("b-pagination",{attrs:{"total-rows":t.rows,"per-page":t.perPage,"aria-controls":"my-table",align:"center"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)])},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-sm-11"},[e("h2",[this._v("Listado de Categorias")])])}],!1,null,null,null);e.default=component.exports}}]);